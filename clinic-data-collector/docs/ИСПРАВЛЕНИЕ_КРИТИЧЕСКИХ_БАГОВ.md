# üö® –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ v2.4

## üìä **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–ª–∏–Ω–∏–∫–∞—Ö –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É:**
- **–°–æ–±—Ä–∞–Ω–æ**: 493 –∫–∞—Ä—Ç–æ—á–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞ 1**: –î—É–±–ª–∏–∫–∞—Ç—ã –ø–æ ID –Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏—Å—å
- **–ü—Ä–æ–±–ª–µ–º–∞ 2**: –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ–≥–¥–∞ 0.00%

### **–í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã:**
```javascript
"id": "1026802654" // "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" - 2+ —Ä–∞–∑–∞ ‚ùå
"id": "91634180883" // "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" - 3+ —Ä–∞–∑–∞ ‚ùå  
"id": "1297689972" // "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" - –¥—É–±–ª–∏–∫–∞—Ç ‚ùå
```

## üõ†Ô∏è **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### **1. üîÑ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞**

#### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–ª–∞ —Ç–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π collectedData
function deduplicateItems(newItems) {
  const existingIds = new Set(collectedData.map(item => item.id));
  // –ù–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ newItems!
}
```

#### **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –¢–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ—Ç –≤–Ω—É—Ç—Ä–∏ –ø–æ—Ä—Ü–∏–∏
function deduplicateItems(newItems, existingData = []) {
  const existingIds = new Set(existingData.map(item => item.id).filter(id => id));
  const processedIds = new Set(); // –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ newItems
  
  return newItems.filter(item => {
    // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
    if (item.id && existingIds.has(item.id)) return false;
    
    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –≤ —ç—Ç–æ–π –ø–æ—Ä—Ü–∏–∏
    if (item.id && processedIds.has(item.id)) return false;
    
    // 3. –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ
    if (item.id) processedIds.add(item.id);
    
    return true;
  });
}
```

### **2. üìä –ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–æ—Å—å**

#### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞:**
```javascript
// –ü–æ–ª–µ dataQuality –¥–æ–±–∞–≤–ª—è–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –≤ injected.js
// –ù–æ –≤ background.js –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–æ—Å—å –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ
"averageDataQuality": "0.00" // –í—Å–µ–≥–¥–∞ 0.00%
```

#### **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –≤ background.js
function calculateItemDataQuality(item) {
  let score = 0, maxScore = 0;
  
  // –ù–∞–∑–≤–∞–Ω–∏–µ (20%)
  maxScore += 0.2;
  if (item.title && item.title.length > 2) score += 0.2;
  
  // –ê–¥—Ä–µ—Å (20%)
  maxScore += 0.2;
  if (item.address && item.address.length > 5) score += 0.2;
  
  // –†–µ–π—Ç–∏–Ω–≥ (15%)
  maxScore += 0.15;
  if (item.ratingData?.ratingValue) score += 0.15;
  
  // –û—Ç–∑—ã–≤—ã (15%)
  maxScore += 0.15;
  if (item.ratingData?.reviewCount > 0) score += 0.15;
  
  // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (10%)
  maxScore += 0.1;
  if (item.coordinates?.length === 2) score += 0.1;
  
  // –¢–µ–ª–µ—Ñ–æ–Ω—ã (10%)
  maxScore += 0.1;
  if (item.phones?.length > 0) score += 0.1;
  
  // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (10%)
  maxScore += 0.1;
  if (item.categories?.length > 0) score += 0.1;
  
  return maxScore > 0 ? score / maxScore : 0;
}

// –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ
dataQuality: item.dataQuality || calculateItemDataQuality(item)
```

## üìà **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

### **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è:**
```
–ë—ã–ª–æ:
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 1026802654) ‚ùå –¥—É–±–ª–∏–∫–∞—Ç 1
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 1026802654) ‚ùå –¥—É–±–ª–∏–∫–∞—Ç 2
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 91634180883) ‚ùå –¥—É–±–ª–∏–∫–∞—Ç 1  
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 91634180883) ‚ùå –¥—É–±–ª–∏–∫–∞—Ç 2
‚îî‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 91634180883) ‚ùå –¥—É–±–ª–∏–∫–∞—Ç 3

–°—Ç–∞–ª–æ:
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 1026802654) ‚úÖ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 91634180883) ‚úÖ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è  
‚îú‚îÄ "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª" (ID: 1297689972) ‚úÖ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è
‚îî‚îÄ –í—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö:**
```
–ë—ã–ª–æ:
"averageDataQuality": "0.00" // –í—Å–µ–≥–¥–∞ 0%

–°—Ç–∞–ª–æ (–¥–ª—è –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö):
"averageDataQuality": "67.3%" // –†–µ–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
‚îú‚îÄ withAddress: 338/493 (68.6%)
‚îú‚îÄ withReviews: 302/493 (61.3%)
‚îú‚îÄ withPhones: 293/493 (59.4%)
‚îî‚îÄ withCategories: 313/493 (63.5%)
```

## üîß **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:**
```javascript
console.log(`[–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è] –ü—Ä–æ–ø—É—â–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç –ø–æ ID: ${item.id} (${item.title})`);
// –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª–∏, –∫–∞–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è
```

### **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```javascript
"collectionStats": {
  "totalFound": 493,
  "withRating": 450,
  "withReviews": 302,
  "withAddress": 338,
  "withCoordinates": 493,
  "withPhones": 293,           // üÜï –ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞
  "withCategories": 313,       // üÜï –ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞  
  "withWorkingHours": 0,       // üÜï –ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞
  "averageDataQuality": "67.3%" // üÜï –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
}
```

### **–ü–æ–ª–µ dataQuality –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ:**
```javascript
{
  "id": "1026802654",
  "title": "–ì–ª–∞–∑–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –°–æ–∫–æ–ª",
  "address": "–ë—É–π–Ω–∞–∫—Å–∫–∞—è —É–ª., 2",
  "ratingData": {
    "ratingValue": 4.9,
    "reviewCount": 224
  },
  "phones": ["+7 (863) 123-45-67"],
  "categories": ["–û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è"],
  "dataQuality": 0.85 // üÜï 85% –∫–∞—á–µ—Å—Ç–≤–∞
}
```

## üéØ **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

### **–î–ª—è –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∏–Ω–∏–∫–∞—Ö:**
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**: –≤–º–µ—Å—Ç–æ 493 —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏ ‚Üí ~350-400 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö
- **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö**: –≤–º–µ—Å—Ç–æ 0% ‚Üí —Ä–µ–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ ~65-70%
- **–ß–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ**: –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **–ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ø–æ –≤—Å–µ–º —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö

### **–î–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—á–µ—Å—Ç–≤—É**: –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å quality > 0.5
- **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è**: –ø–æ –Ω–∞–ª–∏—á–∏—é —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤, –∞–¥—Ä–µ—Å–æ–≤, –æ—Ç–∑—ã–≤–æ–≤
- **–¢–æ—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –±–µ–∑ –∏—Å–∫–∞–∂–µ–Ω–∏–π –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**YandexParser Analytics v2.4** —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ **–§–∏–ª—å—Ç—Ä—É–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã** –ø–æ ID –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
- ‚úÖ **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** –±–µ–∑ –∏—Å–∫–∞–∂–µ–Ω–∏–π
- ‚úÖ **–õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å** –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è

### **–î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ `chrome://extensions/`
2. –ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
3. –ù–∞–±–ª—é–¥–∞–π—Ç–µ –ª–æ–≥–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ (F12)
4. –ü–æ–ª—É—á–∏—Ç–µ —á–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞

**–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏ –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤!** üéØ

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ v2.4 - Fixed Critical Deduplication & Data Quality Bugs*
